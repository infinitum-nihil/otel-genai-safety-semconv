<!--- Hugo front matter used to generate the website version of this page:
linkTitle: Safety
--->

# Semantic conventions for GenAI safety and confidence

**Status**: [Development][DocumentStatus] (Proposed)

<!-- toc -->

- [Overview](#overview)
- [Safety Evaluation Attributes](#safety-evaluation-attributes)
- [Response Modification Attributes](#response-modification-attributes)
- [Confidence Attributes](#confidence-attributes)
- [Usage Examples](#usage-examples)
- [Privacy and Security Considerations](#privacy-and-security-considerations)

<!-- tocstop -->

## Overview

This document defines semantic conventions for GenAI safety system telemetry.
These attributes enable operators to:

- Verify safety systems are active on every request
- Detect when responses have been modified by safety filters
- Implement confidence-based routing to human review
- Meet regulatory logging requirements (e.g., EU AI Act Article 12)

These conventions extend the [GenAI spans](./gen-ai-spans.md) semantic conventions
and follow the same design principles.

## Safety Evaluation Attributes

<!-- semconv gen_ai.safety -->
<!-- NOTE: THIS TEXT IS AUTOGENERATED. DO NOT EDIT BY HAND. -->
<!-- prettier-ignore-start -->

**Status:** ![Development](https://img.shields.io/badge/-development-blue)

These attributes indicate whether safety evaluation systems processed a request or response.

**Attributes:**

| Attribute | Type | Requirement Level | Description | Example |
|-----------|------|-------------------|-------------|---------|
| `gen_ai.safety.evaluation_performed` | boolean | `Recommended` | Indicates that one or more safety evaluation systems processed this request or response. [1] | `true` |
| `gen_ai.safety.evaluation_ids` | string[] | `Opt-In` | Provider-defined identifiers for safety evaluations performed. [2] | `["content_policy_v2", "pii_detection"]` |

**[1] `gen_ai.safety.evaluation_performed`:** This attribute enables operators to distinguish
between environments/requests where safety systems are active versus inactive.
It supports compliance documentation and coverage analysis.

A value of `true` indicates safety evaluation occurred. Absence of this attribute
or a value of `false` indicates safety evaluation did not occur or the provider
does not report this information.

This attribute does NOT indicate the outcome of safety evaluation (pass/fail).

**[2] `gen_ai.safety.evaluation_ids`:** Identifiers SHOULD be stable across requests
but need not expose internal system names. Providers MAY use opaque identifiers.

This attribute supports debugging and audit trails when operators need to
correlate behaviors across requests. It does NOT indicate pass/fail status
of individual evaluations.

<!-- prettier-ignore-end -->
<!-- endsemconv -->

## Response Modification Attributes

<!-- semconv gen_ai.response.modification -->
<!-- NOTE: THIS TEXT IS AUTOGENERATED. DO NOT EDIT BY HAND. -->
<!-- prettier-ignore-start -->

**Status:** ![Development](https://img.shields.io/badge/-development-blue)

These attributes indicate whether and how a response was modified after initial generation.

**Attributes:**

| Attribute | Type | Requirement Level | Description | Example |
|-----------|------|-------------------|-------------|---------|
| `gen_ai.response.modified` | boolean | `Recommended` | Indicates the final response differs from initial generation due to post-generation processing. [1] | `true` |
| `gen_ai.response.modification_type` | string | `Conditionally Required` if `gen_ai.response.modified` is `true` | Categorizes the type of modification applied to the response. [2] | `safety_filter` |
| `gen_ai.response.generation_attempts` | int | `Opt-In` | Count of generation attempts before producing final response. [3] | `3` |

**[1] `gen_ai.response.modified`:** This includes safety filtering, content adjustment,
PII redaction, or policy application.

This attribute is critical for trust calibration. A modified response may warrant
different downstream handling than an unmodified response. It enables human-in-the-loop
systems to allocate review attention appropriately.

**[2] `gen_ai.response.modification_type`:** Different modification types have different
implications for downstream use. A truncated response may be continued; a safety-filtered
response should not be prompt-engineered around.

**[3] `gen_ai.response.generation_attempts`:** A value greater than 1 indicates regeneration
occurred. Multiple generation attempts may indicate the model encountered difficulty
with the request.

This attribute is useful for debugging, cost attribution, and latency analysis.

---

`gen_ai.response.modification_type` has the following list of well-known values.
If one of them applies, then the respective value MUST be used; otherwise, a custom value MAY be used.

| Value | Description | Stability |
|-------|-------------|-----------|
| `safety_filter` | Content modified due to safety policy | ![Development](https://img.shields.io/badge/-development-blue) |
| `pii_redaction` | Personally identifiable information removed | ![Development](https://img.shields.io/badge/-development-blue) |
| `truncation` | Response truncated (length, time, tokens) | ![Development](https://img.shields.io/badge/-development-blue) |
| `format_adjustment` | Structure/format changed (not content) | ![Development](https://img.shields.io/badge/-development-blue) |
| `citation_injection` | Citations or attributions added | ![Development](https://img.shields.io/badge/-development-blue) |
| `_OTHER` | Other modification type | ![Development](https://img.shields.io/badge/-development-blue) |

<!-- prettier-ignore-end -->
<!-- endsemconv -->

## Confidence Attributes

<!-- semconv gen_ai.confidence -->
<!-- NOTE: THIS TEXT IS AUTOGENERATED. DO NOT EDIT BY HAND. -->
<!-- prettier-ignore-start -->

**Status:** ![Development](https://img.shields.io/badge/-development-blue)

These attributes provide provider-computed confidence signals about response reliability.

**Attributes:**

| Attribute | Type | Requirement Level | Description | Example |
|-----------|------|-------------------|-------------|---------|
| `gen_ai.confidence.score` | double | `Opt-In` | Provider-computed confidence score representing the provider's assessment of response reliability. [1] | `0.85` |
| `gen_ai.confidence.method` | string | `Conditionally Required` if `gen_ai.confidence.score` is provided | Documents the method used to compute `gen_ai.confidence.score`. [2] | `logprob_derived` |
| `gen_ai.confidence.abstention_recommended` | boolean | `Opt-In` | Provider signal indicating this response may benefit from human review, additional verification, or abstention from autonomous action. [3] | `true` |

**[1] `gen_ai.confidence.score`:** Scale of 0.0 (no confidence) to 1.0 (full confidence).
Providers SHOULD document their confidence computation methodology.

This attribute enables downstream systems to implement confidence-based routing,
human review thresholds, and appropriate uncertainty communication to end users.

Confidence scores are NOT directly comparable across providers or methods without
calibration.

**[2] `gen_ai.confidence.method`:** Confidence scores computed via different methods
have different reliability characteristics. Downstream systems may weight or
interpret scores differently based on method.

**[3] `gen_ai.confidence.abstention_recommended`:** This is a provider recommendation,
not a mandate. It enables providers to communicate "soft" uncertainty that may
not be captured in a numeric score.

This attribute supports human-in-the-loop architectures without requiring
providers to expose detailed reasoning.

---

`gen_ai.confidence.method` has the following list of well-known values.
If one of them applies, then the respective value MUST be used; otherwise, a custom value MAY be used.

| Value | Description | Stability |
|-------|-------------|-----------|
| `logprob_derived` | Derived from token log probabilities | ![Development](https://img.shields.io/badge/-development-blue) |
| `self_evaluation` | Model self-assessment | ![Development](https://img.shields.io/badge/-development-blue) |
| `ensemble` | Agreement across multiple generations | ![Development](https://img.shields.io/badge/-development-blue) |
| `classifier` | External classifier assessment | ![Development](https://img.shields.io/badge/-development-blue) |
| `calibrated_hybrid` | Combination of methods with calibration | ![Development](https://img.shields.io/badge/-development-blue) |
| `_OTHER` | Other method | ![Development](https://img.shields.io/badge/-development-blue) |

<!-- prettier-ignore-end -->
<!-- endsemconv -->

## Usage Examples

### Basic Safety Telemetry

```json
{
  "gen_ai.operation.name": "chat",
  "gen_ai.request.model": "gpt-4",
  "gen_ai.safety.evaluation_performed": true,
  "gen_ai.response.modified": false
}
```

### Response Modified by Safety Filter

```json
{
  "gen_ai.operation.name": "chat",
  "gen_ai.request.model": "claude-3-opus",
  "gen_ai.safety.evaluation_performed": true,
  "gen_ai.safety.evaluation_ids": ["content_safety_v3", "pii_detector"],
  "gen_ai.response.modified": true,
  "gen_ai.response.modification_type": "safety_filter",
  "gen_ai.response.generation_attempts": 2
}
```

### Confidence-Based Routing

```json
{
  "gen_ai.operation.name": "chat",
  "gen_ai.request.model": "gemini-pro",
  "gen_ai.safety.evaluation_performed": true,
  "gen_ai.confidence.score": 0.62,
  "gen_ai.confidence.method": "ensemble",
  "gen_ai.confidence.abstention_recommended": true
}
```

## Privacy and Security Considerations

These attributes are designed to enable compliance without exposing sensitive information:

1. **No content exposure**: Attributes indicate *that* modification occurred, not *what* was modified
2. **Opaque identifiers**: Evaluation IDs need not reveal system architecture
3. **No threshold exposure**: Modified flag does not reveal what triggered the modification
4. **Provider discretion**: All attributes are Recommended or Opt-In

Providers SHOULD NOT include information in these attributes that would:
- Reveal safety system bypass techniques
- Expose proprietary model architecture details
- Enable adversarial prompt engineering

[DocumentStatus]: https://opentelemetry.io/docs/specs/otel/document-status
